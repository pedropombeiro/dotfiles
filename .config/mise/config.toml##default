redactions = ["*_API_KEY", "*_TOKEN"]

[env]
_.source = { path = ".github_token.sh", redact = true }
OPENCODE_CONFIG_CONTENT = '{"plugin":["@tarquinen/opencode-dcp@latest"]}'

[settings]
jobs = 1
idiomatic_version_file_enable_tools = []

[settings.pipx]
uvx = true

[tools]
ruby = "3.4.8"
cargo-binstall = "latest"
dua = "latest"
fd = "latest"
grpcurl = "latest"
node = "latest"
"opencode" = { version = "1.2.9", no_app = true }
pre-commit = "latest"
yamllint = "latest"

"gem:neovim" = "0.10.0"
"gem:ruby-lsp" = "0.26.7"
"gem:standard" = "latest"

"npm:renovate" = "43.11.1"

"pipx:neovim-remote" = "2.5.1"

# ── Brew ──────────────────────────────────────────────────────────────

[tasks."brew:dump"]
description = "Dump current Homebrew packages to Brewfile"
run = "brew bundle dump --global --describe --force"

[tasks."brew:cleanup"]
description = "Remove packages not in Brewfile"
run = "brew bundle cleanup ~/.Brewfile --force --file"

# ── Network ───────────────────────────────────────────────────────────

[tasks."network:wifi-traffic"]
description = "Sniff Wi-Fi traffic from the AP"
run = 'ssh ap-u6pro.infra.pombei.ro "tcpdump -np"'
