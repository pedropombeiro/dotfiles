-- image.nvim (https://github.com/3rd/image.nvim)

--  üñºÔ∏è Bringing images to Neovim.

-- Only enabled for iTerm2 (uses sixel backend).
-- For WezTerm, we use Snacks.image with Kitty graphics protocol instead.

return {
  "3rd/image.nvim",
  ft = { "markdown" },
  cond = function()
    return not vim.g.started_by_firenvim and vim.env.TERM_PROGRAM == "iTerm.app"
  end,
  opts = {
    backend = "sixel",
    processor = "magick_rock",
    integrations = {
      markdown = {
        enabled = true,
        clear_in_insert_mode = true,
        download_remote_images = true,
        only_render_image_at_cursor = true,
        only_render_image_at_cursor_mode = "popup", -- or "inline"
        floating_windows = false, -- if true, images will be rendered in floating markdown windows
        filetypes = { "markdown" },
      },
    },
  },
}
