-- mason-tool-installer.nvim (https://github.com/WhoIsSethDaniel/mason-tool-installer.nvim)
--  Install and upgrade third party tools automatically

local function has_cargo()
  return vim.fn.executable("cargo") == 1
end

local function has_go()
  return vim.fn.executable("go") == 1
end

local function has_ruby()
  local p = vim.fn.exepath("ruby")
  return p ~= "" and not p:find("/usr/bin/ruby")
end

return {
  "WhoIsSethDaniel/mason-tool-installer.nvim",
  dependencies = {
    "mason-org/mason.nvim",
  },
  opts = {
    ensure_installed = {
      "actionlint",
      "checkmake",
      "docker-compose-language-service",
      { "erb-formatter", condition = has_ruby },
      { "erb-lint", condition = has_ruby },
      "fixjson",
      "gitlint",
      "hadolint",
      { "gitlab-ci-ls", condition = has_cargo },
      { "golangci-lint", condition = has_go },
      { "golangci-lint-langserver", condition = has_go },
      { "goimports", condition = has_go },
      { "gofumpt", condition = has_go },
      { "gopls", condition = has_go },
      "jsonlint",
      "just-lsp",
      "lua_ls",
      "markdownlint-cli2",
      "mypy",
      "prettier",
      "pyrefly",
      { "ruby-lsp", condition = has_ruby },
      "shfmt",
      "shellcheck",
      "stylua",
      "taplo",
      "tree-sitter-cli",
      "vale",
      "yamlfmt",
      "yamllint",
    },
  },
}
